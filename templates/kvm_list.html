{% extends "base.html" %}
{% block title %}KVM 虚拟机列表 - {{ host_ip }}{% endblock %}

{% block content %}
<h2>{{ host_ip }} 上的 KVM 虚拟机</h2>

<!-- 表格必须有 id="kvm-table" -->
<table id="kvm-table" class="table table-bordered table-striped">
    <thead class="table-dark">
        <tr>
            <th>名称</th>
            <th>状态</th>
            <th>ip 地址</th>
            <th>CPU</th>
            <th>当前内存 </th>
            <th>qemu-agent 状态</th>
{#            <th>最大内存 (MB)</th>#}
            <th>操作</th>
        </tr>
    </thead>
    <tbody>
        <!-- 数据由 main.js 异步填充 -->
    </tbody>

<div class="mt-4">
    <h5>资源使用情况</h5>
    <div class="alert alert-info d-flex justify-content-between">
        <span>正在运行的 CPU 总核数：<strong id="total-cpu">0</strong> 核</span>
        <span>正在运行的内存总量：<strong id="total-memory">0</strong> GB</span>
    </div>
</div>
</table>
{% endblock %}

{% block scripts %}
<!-- 注入 host_ip 到页面中 -->
<script>
  document.body.dataset.hostIp = "{{ host_ip }}";
</script>

<!-- 加载 main.js -->
<script src="{{ url_for('static', filename='main.js') }}"></script>
{% endblock %}
